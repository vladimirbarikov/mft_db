1. mft_db - это бэкенд для веб-приложения, которое предоставляет пользователям возможность находить следующую информацию:
    1. Номер и название автокомпонентов (далее 'деталей');
    1. Номер, размеры и вместимость упаковки;
    2. Модель автомобиля, в которую устанавливается деталь;
    3. Производственные линию и цех, где деталь устанавливается в автомобиль;
    4. Название и адрес поставщика, который производит деталь;
    5. Статус локализации, производится ли деталь локально или за рубежем; 
    6. Историю изменений номера детали, производственной линии, поставщика и статуса локализации при техическом изменении детали (breakpoint);

2. Условия для правильной работы:
    
3. Структура проекта:

    mft_db_project/
    ├── config/                                                 # Директория для конфигурационных файлов Apache Airflow
    ├── dags/                                                   # Директория для хранения рабочих процессов DAG (Directed Acyclic Graphs) Apache Airflow
    │   ├── __init__.py                                         # Обязательный файл для обозначения пакета Python
    │   ├── dag.py                                              # Основной файл с определением рабочих процессов DAG (Directed Acyclic Graphs) Apache Airflow
    │   └── tasks/                                              # Директория для хранения задач (task) Apache Airflow
    |       ├── __init__.py                                     # Обязательный файл для обозначения пакета Python
    │       ├── extractor.py                                    # Реализация таска извлечения данных
    |       ├── transformer.py                                  # Реализация таска преобразования данных
    │       └── loader.py                                       # Реализация таска загрузки данных в базу данных mft_db
    ├── data/                                                   # Директория необходимая для Apache Airflow
    ├── database/                                               # Директория для Python модулей, создающих схему базы данных и пользователей
    |   ├── database.py                                         # Библиотека с указанием схемы базы данных
    |   └── user_roles.py                                       # Библиотека с указанием прав доступа пользователей
    ├── dockerfiles/                                            # Установка необходимых зависимостей Python в контейнеры Airflow
    │   ├── Dockerfile                                          # Установка зависимостей Python 
    │   └── requirements.txt                                    # Зависимости Python
    ├── endpoints/                                              # Директория для маршрутов API
    │   ├── __init__.py                                         # Обязательный файл для обозначения пакета Python
    │   ├── display_api.py                                      # Маршрут для отображения данных из базы данных
    │   ├── modify_api.py                                       # Маршрут для изменения данных в базе данных
    │   ├── upload_api.py                                       # Маршрут для загрузки файлов Excel
    │   └── user_manager_api.py                                 # Маршрут для создания/удаления и предоставления прав доступа пользователям
    ├── logs/                                                   # Директория для сохранения логов
    ├── plugins/                                                # Дополнительные плагины (если нужны)
    ├── docker-compose.yml                                      # Инструкции по запуску сервисов (контейнеров)
    ├── .dockerignore                                           # Игнорирование загрузки секретных и ненужных файлов в контейнер Docker
    ├── .env                                                    # Настройки подключения к базе данных
    ├── .gitignore                                              # Игнорирование загрузки секретных и ненужных файлов в репозиторий Git
    ├── LICENCE                                                 # MIT лицензия для open source проекта
    ├── mft_db_flow_chart.pdf                                   # Блок-схема базы данных
    └── README.md                                               # Описание проекта
    
4. Поток данных (доработать).
    ┌────────────────────────────┐    ┌─────────────────────────────────┐    ┌───────────────────────────┐               ┌────────────────────┐
    │   ПОЛЬЗОВАТЕЛЬ             │    │     UPLOADS                     │    │    PROCESSED              │               │  БАЗА ДАННЫХ       │
    │                            │───>│                                 │───>│                           │               │                    │
    │ • Загружает Excel файлы    │    │ • sample_mft_data.xlsx          │    │ • mft_data_processed.json │               │ • Таблица parts    │
    │                            │    │ • sample_break-point_data.xlsx  │    │ • breakpoint_data.json    │               │ • Таблица changes  │
    │                            │    │                                 │    │                           │               │                    │
    └────────────────────────────┘    └─────────────────────────────────┘    └───────────────────────────┘               └────────────────────┘
        │                                 │                                      │
        │ Загрузка через API              │ Обработка Airflow                    │ Загрузка в БД
        ▼                                 ▼                                      ▼

5. Основной функционал.
    1. Пользователи могут просмотривать, вводить, корректировать следующие данные:
        1. 'PART_NUMBER' - Уникальный номер детали;
        2. 'PART_NAME' - Название детали;
        3. 'PART_WEIGHT_KG' - Вес детали в киллограммах;
        4. 'PART_per_VEHICLE' - Количество деталей на 1 автомобиль;
        5. 'CONFIGURATION' - Конфигурация автомобиля;
        6. 'MODEL_CODE' - Код модели автомобиля ('A01', 'A08', 'B02', 'B04', 'B06', 'B16');
        7. 'MODEL_NAME' - Модель автомобиля ('Jolion', 'H3', 'F7', 'F7x', 'Dargo', 'H7');
        8. 'LINE_CODE' - Уникальный код производственной линии;
        9. 'LINE_NAME' - Производственная линия;
        10. 'WORKSHOP_NAME' - Производственный цех ('Assembly', 'Component', 'Painting', 'Welding', 'Stamping', 'Engine');
        11. 'WORKSHOP_CODE' - Сокращенное название производственного цеха ('AS', 'COMP', 'PAINT', 'WELD', 'STAMP', 'EN');
        12. 'PART_per_BOX' - Количество деталей в 1 ящике;
        13. 'BOX_NUMBER' - Уникальный номер ящика;
        14. 'BOX_TYPE' - Тип ящика ('returnable', 'non-returnable');
        15. 'BOX_WEIGHT_KG' - Вес ящика в киллограммах;
        16. 'BOX_LENGTH_MM' - Длина ящика в миллиметрах;
        17. 'BOX_WIDTH_MM' - Ширина ящика в миллиметрах;
        18. 'BOX_HEIGHT_MM' - Высота ящика в миллиметрах;
        19. 'BOX_VOL_M3' - Объем ящика в кубических метрах;
        20. 'BOX_AREA_M2' - Площадь ящика в квадратных метрах;
        21. 'BOX_STACKING' - Количество ящиков поставленных друг на друга;
        22. 'BOX_per_PALLET' - Количество ящиков на одном поддоне;
        23. 'PALLET_NUMBER' - Уникальный номер поддона;
        24. 'PALLET_TYPE' - Тип поддона ('returnable', 'non-returnable');
        25. 'PALLET_WEIGHT_KG' - Вес поддона в киллограммах;
        26. 'PALLET_LENGTH_MM' - Длина поддона в миллиметрах;
        27. 'PALLET_WIDTH_MM' - Ширина поддона в миллиметрах;
        28. 'PALLET_HEIGHT_MM' - Высота поддона в миллиметрах;
        29. 'PALLET_VOL_M3' - Объем поддона в кубических метрах;
        30. 'PALLET_AREA_M2' - Площадь поддона в квадратных метрах;
        31. 'PALLET_STACKING' - Количество поддонов поставленных друг на друга;
        32. 'SUPPLIER_NAME' - Название поставщика;
        33. 'LOCATION' - Страна расположения поставщика;
        34. 'CITY' - Город расположения поставщика;
        35. 'STREET' - Улица расположения поставщика;
        36. 'BUILDING' - Здание расположения поставщика;
        37. 'LOCALIZATION' - Локализация поставщика ('yes', 'no');
        38. 'BREAKPOINT_NUMBER' - Номер технического изменения;
        39. 'BREAKPOINT_DATE' - Дата вступления в силу технического изменения;
        40. 'PART_NUMBER_BEFORE_CHANGE' - Номер детали до технического изменения;
        41. 'SUPPLIER_NAME_BEFORE_CHANGE' - Название поставщика до технического изменения;
        42. 'LOCALIZATION_BEFORE_CHANGE' - Статус локализации до технического изменения;
        43. 'LINE_NAME_BEFORE_CHANGE' - Производственная линия до технического изменения;

    2. Просмотр основных данных о деталях. Пользователи могут просматривать основные данные о деталях проставив фильтры:
        1. По номеру детали 'PART_NUMBER' - пользователь вводит номер детали, выводятся данные об этой детали перечисленные выше;
        2. По коду модели автомобиля 'MODEL_CODE' - пользователь вводит код модели автомобиля, выводятся все детали встаиваемые в этот автомобиль и данные об этих деталях перечисленные выше;
        3. По модели автомобиля 'MODEL_NAME' - пользователь вводит название модели автомобиля, выводятся все детали встаиваемые в этот автомобиль и данные об этих деталях перечисленные выше;
        4. По коду производственной линии 'LINE_CODE' - пользователь вводит код производственной линии, выводятся все детали встаиваемые на этой линии и данные об этих деталях перечисленные выше;
        5. По производственной линии 'LINE_NAME' - пользователь вводит название производственной линии, выводятся все детали встаиваемые на этой линии и данные об этих деталях перечисленные выше;
        6. По названию поставщика 'SUPPLIER_NAME' - пользователь вводит название поставщика, выводятся все детали поставляемые этим поставщиков и данные об этих деталях перечисленные выше;
        7. По стране расположения поставщика 'LOCATION' - пользователь вводит название страны, выводятся все поставщики, расположенные в этой стране, детали поставляемые этими поставщиками и данные об этих деталях перечисленные выше;
        7. По городу расположения поставщика 'CITY' - пользователь вводит название города, выводятся все поставщики, расположенные в этом городе, детали поставляемые этими поставщиками и данные об этих деталях перечисленные выше;
        8. По локализации 'LOCALIZATION' - пользователь вводит 'yes' или 'no', выводятся все поставщики, согласно статусу локализации, детали поставляемые этими поставщиками и данные об этих деталях перечисленные выше;

    3. Ввод новых данных о деталях. Пользователи могут вводить данные следующими способами:
        1. Новые данные вводятся отдельно для каждого нового номера детали по каждому из вышеперечисленных пунктов;
        2. Новые данные вводятся массово для большого количества новых номеров деталей с помощью загружаемого файла sample_mft_data.xlsx;

    4. Корректировка имеющихся данных о деталях. Пользователи могут корректировать данные для имеющихся деталей следующим способом:
        1. Данные корректируются отдельно для каждого имеющегося номера детали по каждому из вышеперечисленных пунктов. Номер детали при этом не меняется;

6. Дополнительный функционал.
    Пользователи могут вносить и сохранять историю технических изменений номеров деталей, производственных линий, поставщиков и статуса локализации (breakpoint):
    1. Изменение номера детали и производственной линии вводится отдельно для каждого нового номера детали, сохраняя текущий номер детали, код и название производственной линии, название текущего и нового поставщиков и статуса локализации;
    2. Новые данные вводятся массово для большого количества новых номеров деталей с помощью загружаемого файла sample_breakpoint_data.xlsx;

7. Состояние таблиц базы данных mft_db и алгоритм подстановки данных:
    1. 'supplier_data' состоит из следующих колонок:
        1. 'SUPPLIER_ID' - первичный ключ состоит из 2 частей: часть 1 - это префикс "SUP_", часть 2 создается с помощью функции random и состоит из 8 случайных цифр 0-9 и букв A-Z, a-z. Пример "SUP_cSj3XgaD";
        2. 'SUPPLIER_NAME' - выбирается из файла sample_mft_data.xlsx;
        3. 'LOCATION' - выбирается из файла sample_mft_data.xlsx;
        4. 'CITY' - выбирается из файла sample_mft_data.xlsx;
        5. 'BUILDING' - выбирается из файла sample_mft_data.xlsx;
        6. 'LOCALIZATION' - выбирается из файла sample_mft_data.xlsx;
    2. 'part_data' состоит из следующих колонок:
        1. 'PART_ID' - первичный ключ состоит из 2 частей: часть 1 - это префикс "PRT_", часть 2 создается с помощью функции random и состоит из 8 случайных цифр 0-9 и букв A-Z, a-z. Пример "PRT_cSj3XgaD";
        2. 'PART_NUMBER' - выбирается из файла sample_mft_data.xlsx;
        3. 'PART_NAME' - выбирается из файла sample_mft_data.xlsx;
        4. 'PART_WEIGHT_KG' - выбирается из файла sample_mft_data.xlsx;
        5. 'SUPPLIER_ID' - внешний ключ файла 'supplier_data';
    3. 'box_data' состоит из следующих колонок:
        1. 'BOX_ID' - первичный ключ состоит из 2 частей: часть 1 - это префикс "BOX_", часть 2 создается с помощью функции random и состоит из 8 случайных цифр 0-9 и букв A-Z, a-z. Пример "BOX_cSj3XgaD";
        2. 'BOX_NUMBER' - сотоит 4 частей: префикс "A", 'BOX_LENGTH_MM', 'BOX_WIDTH_MM', 'BOX_HEIGHT_MM'. Пример 'A 1340-560-440'; 
        3. 'BOX_TYPE' - выбирается из файла sample_mft_data.xlsx;
        4. 'BOX_WEIGHT_KG' - выбирается из файла sample_mft_data.xlsx;
        5. 'BOX_LENGTH_MM' - выбирается из файла sample_mft_data.xlsx;
        6. 'BOX_WIDTH_MM' - выбирается из файла sample_mft_data.xlsx;
        7. 'BOX_HEIGHT_MM' - выбирается из файла sample_mft_data.xlsx;
        8. 'BOX_VOL_M3' - создается по формуле 'BOX_VOL_M3' = round(('BOX_LENGTH_MM' / 1000) * ('BOX_WIDTH_MM' / 1000) * ('BOX_HEIGHT_MM' / 1000), 2);
        9. 'BOX_AREA_M2' - создается по формуле 'BOX_AREA_M2' = round(('BOX_LENGTH_MM' / 1000) * ('BOX_WIDTH_MM' / 1000), 2);
        10. 'BOX_STACKING' - выбирается из файла sample_mft_data.xlsx;
    4. 'pallet_data' состоит из следующих колонок:
        1. 'PALLET_ID' - первичный ключ состоит из 2 частей: часть 1 - это префикс "PLT_", часть 2 создается с помощью функции random и состоит из 8 случайных цифр 0-9 и букв A-Z, a-z. Пример "PLT_cSj3XgaD";
        2. 'PALLET_NUMBER' - сотоит 4 частей: префикс "A", 'PALLET_LENGTH_MM', 'PALLET_WIDTH_MM', 'PALLET_HEIGHT_MM'. Пример 'A 1340-1560-1440';
        3. 'PALLET_TYPE' - выбирается из файла sample_mft_data.xlsx;
        4. 'PALLET_WEIGHT_KG' - выбирается из файла sample_mft_data.xlsx;
        5. 'PALLET_LENGTH_MM' - выбирается из файла sample_mft_data.xlsx;
        6. 'PALLET_WIDTH_MM' - выбирается из файла sample_mft_data.xlsx;
        7. 'PALLET_HEIGHT_MM' - выбирается из файла sample_mft_data.xlsx;
        8. 'PALLET_VOL_M3' - создается по формуле 'PALLET_VOL_M3' = round(('PALLET_LENGTH_MM' / 1000) * ('PALLET_WIDTH_MM' / 1000) * ('PALLET_HEIGHT_MM' / 1000), 2);
        9. 'PALLET_AREA_M2' - создается по формуле 'PALLET_AREA_M2' = round(('PALLET_LENGTH_MM' / 1000) * ('PALLET_WIDTH_MM' / 1000), 2);
        10. 'PALLET_STACKING' - выбирается из файла sample_mft_data.xlsx;
    5. 'part_to_box' состоит из следующих колонок:
        1. 'PART_ID' - первичный ключ для таблицы 'part_to_box', внешний ключ для таблицы 'part_data';
        2. 'BOX_ID' - первичный ключ для таблицы 'part_to_box', внешний ключ для таблицы 'box_data';
        3. 'PART_PER_BOX' - выбирается из файла sample_mft_data.xlsx;
    6. 'box_to_pallet' состоит из следующих колонок:
        1. 'BOX_ID' - первичный ключ для таблицы 'box_to_pallet', внешний ключ для таблицы 'box_data';
        2. 'PALLET_ID' - первичный ключ для таблицы 'box_to_pallet', внешний ключ для таблицы 'pallet_data';
        3. 'BOX_PER_PALLET' - выбирается из файла sample_mft_data.xlsx;
    7. 'model_data' состоит из следующих колонок:
        1. 'MODEL_ID' - первичный ключ состоит из 2 частей: часть 1 - это префикс "MDL_", часть 2 создается с помощью функции random и состоит из 8 случайных цифр 0-9 и букв A-Z, a-z. Пример "MDL_cSj3XgaD";
        2. 'MODEL_CODE' - выбирается из файла sample_mft_data.xlsx;
        3. 'MODEL_NAME' - выбирается из файла sample_mft_data.xlsx;
    8. 'part_to_model' состоит из следующих колонок:
        1. 'PART_ID' - первичный ключ для таблицы 'part_to_model', внешний ключ для таблицы 'part_data';
        2. 'MODEL_ID' - первичный ключ для таблицы 'part_to_model', внешний ключ для таблицы 'model_data';
        3. 'CONFIGURATION' - выбирается из файла sample_mft_data.xlsx;
        4. 'PART_PER_VEHICLE' - выбирается из файла sample_mft_data.xlsx;
    9. 'workshop_data' состоит из следующих колонок:
        1. 'WORKSHOP_ID' - первичный ключ состоит из 2 частей: часть 1 - это префикс "WSP_", часть 2 создается с помощью функции random и состоит из 8 случайных цифр 0-9 и букв A-Z, a-z. Пример "WSP_cSj3XgaD";
        2. 'WORKSHOP_CODE' - выбирается из файла sample_mft_data.xlsx;
        3. 'WORKSHOP_NAME' - выбирается из файла sample_mft_data.xlsx;
    10. 'line_data' состоит из следующих колонок:
        1. 'LINE_ID' - первичный ключ состоит из 2 частей: часть 1 - это префикс "LNE_", часть 2 создается с помощью функции random и состоит из 8 случайных цифр 0-9 и букв A-Z, a-z. Пример "STN_cSj3XgaD";
        2. 'LINE_CODE' - выбирается из файла sample_mft_data.xlsx;
        3. 'LINE_NAME' - выбирается из файла sample_mft_data.xlsx;
        4. 'WORKSHOP_ID' - внешний ключ для таблицы 'workshop_data';
    11. 'part_to_line' состоит из следующих колонок:
        1. 'PART_ID' - первичный ключ для таблицы 'part_to_station', внешний ключ для таблицы 'part_data';
        2. 'LINE_ID' - первичный ключ для таблицы 'part_to_station', внешний ключ для таблицы 'line_data';
    12. 'breakpoint_data' состоит из следующих колонок:
        1. 'BREAKPOINT_ID' - первичный ключ состоит из 2 частей: часть 1 - это префикс "BPT_", часть 2 создается с помощью функции random и состоит из 8 случайных цифр 0-9 и букв A-Z, a-z. Пример "BPT_cSj3XgaD";
        2. 'INPUT_DATE' - дата ввода данных в таблицу 'breakpoint_data';
        3. 'BREAKPOINT_NUMBER' - уникальный номер технического изменения;
        4. 'BREAKPOINT_DATE' - дата, когда техническое изменения вступает в силу;
    13. 'part_to_breakpoint' состоит из следующих колонок:
        1. 'PART_ID' - первичный ключ для таблицы 'part_to_breakpoint', внешний ключ для таблицы 'part_data';
        2. 'BREAKPOINT_ID' - первичный ключ для таблицы 'part_to_breakpoint', внешний ключ для таблицы 'breakpoint_data';
        5. 'PART_NUMBER_BEFORE_CHANGE' - выбирается из файла sample_breakpoint_data.xlsx;
        7. 'SUPPLIER_NAME_BEFORE_CHANGE' - выбирается из файла sample_breakpoint_data.xlsx;
        10. 'LINE_NAME_BEFORE_CHANGE' - выбирается из файла sample_breakpoint_data.xlsx;
        12. 'LOCALIZATION_BEFORE_CHANGE' - выбирается из файла sample_breakpoint_data.xlsx;;

8. Алгоритм загрузки основных данных из файла mft_data.xlsx в базу данных mft_db.
    1. Код в файле extractor.py работает согласно следующему алгоритму:
        1. Файл mft_data.xlsx не должен хранится в конкретной директории проекта, пользователи сами выбираот файл из любой директории указав к ней путь;
        2. Файл mft_data.xlsx всегда состоит из следующих колонок:
            1. 'PART_NUMBER' - Уникальный номер детали;
            2. 'PART_NAME' - Название детали;
            3. 'PART_WEIGHT_KG' - Вес детали в киллограммах;
            4. 'PART_per_VEHICLE' - Количество деталей на 1 автомобиль;
            5. 'CONFIGURATION' - Конфигурация автомобиля;
            6. 'MODEL_CODE' - Код модели автомобиля ('A01', 'A08', 'B02', 'B04', 'B06', 'B16');
            7. 'MODEL_NAME' - Модель автомобиля ('Jolion', 'H3', 'F7', 'F7x', 'Dargo', 'H7');
            8. 'LINE_CODE' - Уникальный код производственной линии;
            9. 'LINE_NAME' - Производственная линия;
            10. 'WORKSHOP_NAME' - Производственный цех ('Assembly', 'Component', 'Painting', 'Welding', 'Stamping', 'Engine');
            11. 'WORKSHOP_CODE' - Сокращенное название производственного цеха ('AS', 'COMP', 'PAINT', 'WELD', 'STAMP', 'EN');
            12. 'PART_per_BOX' - Количество деталей в 1 ящике;
            13. 'BOX_NUMBER' - Уникальный номер ящика;
            14. 'BOX_TYPE' - Тип ящика ('returnable', 'non-returnable');
            15. 'BOX_WEIGHT_KG' - Вес ящика в киллограммах;
            16. 'BOX_LENGTH_MM' - Длина ящика в миллиметрах;
            17. 'BOX_WIDTH_MM' - Ширина ящика в миллиметрах;
            18. 'BOX_HEIGHT_MM' - Высота ящика в миллиметрах;
            19. 'BOX_VOL_M3' - Объем ящика в кубических метрах;
            20. 'BOX_AREA_M2' - Площадь ящика в квадратных метрах;
            21. 'BOX_STACKING' - Количество ящиков поставленных друг на друга;
            22. 'BOX_per_PALLET' - Количество ящиков на одном поддоне;
            23. 'PALLET_NUMBER' - Уникальный номер поддона;
            24. 'PALLET_TYPE' - Тип поддона ('returnable', 'non-returnable');
            25. 'PALLET_WEIGHT_KG' - Вес поддона в киллограммах;
            26. 'PALLET_LENGTH_MM' - Длина поддона в миллиметрах;
            27. 'PALLET_WIDTH_MM' - Ширина поддона в миллиметрах;
            28. 'PALLET_HEIGHT_MM' - Высота поддона в миллиметрах;
            29. 'PALLET_VOL_M3' - Объем поддона в кубических метрах;
            30. 'PALLET_AREA_M2' - Площадь поддона в квадратных метрах;
            31. 'PALLET_STACKING' - Количество поддонов поставленных друг на друга;
            32. 'SUPPLIER_NAME' - Название поставщика;
            33. 'LOCATION' - Страна расположения поставщика;
            34. 'CITY' - Город расположения поставщика;
            35. 'STREET' - Улица расположения поставщика;
            36. 'BUILDING' - Здание расположения поставщика;
            37. 'LOCALIZATION' - Локализация поставщика ('yes', 'no');
        3. Из mft_data.xlsx с помощью библиотеки pandas создается исходный датафрейм mft_data_df;
        4. Исходный датафрейм mft_data_df делится на 11 датафреймов для загрузки данных в следующие таблицы базы данных mft_db:
            1. 'supplier_data' - Таблица с данными о поставщиках;
            2. 'part_data' - Таблица с данными о деталях;
            3. 'box_data' - Таблица с данными о ящиках;
            4. 'pallet_data' - Таблица с данными о поддонах;
            5. 'part_to_box' - Таблица связи "многие ко многим" данных о деталях с данными о ящиках;
            6. 'box_to_pallet' - Таблица связи "многие ко многим" данных о ящиках с данными о поддонах;
            7. 'model_data' - Таблица с данными о модельном ряде;
            8. 'part_to_model' - Таблица связи "многие ко многим" данных о деталях с данными о модельном ряде;
            9. 'workshop_data' - Таблица с данными о производственных цехах;
            10. 'station_data' - Таблица с данными о производственных линиях;
            11. 'part_to_station' - Таблица связи "многие ко многим" данных о деталях с данными о производственных линиях;
        
    
    2. Код в файле transformer.py работает согласно следующему алгоритму:
        
        1. 
    
    3. Код в файле loader.py работает согласно следующему алгоритму:

        1. 
